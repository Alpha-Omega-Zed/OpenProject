<%=
  component_wrapper do
    render(border_box_container(mb: 3, data: { test_selector: "project-life-cycle-administration" })) do |component|
      component.with_header(font_weight: :bold, py: 2) do
        flex_layout(justify_content: :space_between, align_items: :center) do |header_container|
          header_container.with_column(py: 2) do
            # adding py: 2 here to match the padding of the actions_container
            # otherwise the header height changes when the actions gets hidden when filtering
            render(Primer::Beta::Text.new(font_weight: :bold)) do
              I18n.t('projects.settings.life_cycle.section_header')
            end
          end
          header_container.with_column(flex_layout: true, justify_content: :flex_end) do |actions_container|
            actions_container.with_column(data: { 'projects--settings--project-custom-fields-mapping-filter-target': 'bulkActionContainer' }) do
              render(Primer::Beta::Button.new(
                tag: :a,
                href: enable_all_project_settings_life_cycle_path(project_id: project),
                scheme: :invisible,
                font_weight: :bold,
                color: :subtle,
                'aria-label': t('projects.settings.actions.label_enable_all'),
                data: { 'turbo-method': :post, 'turbo': true, test_selector: "enable-all-life-cycle-elements" }
              )) do |button|
                button.with_leading_visual_icon(icon: 'check-circle', color: :subtle)
                t('projects.settings.actions.label_enable_all')
              end
            end
            actions_container.with_column(data: { 'projects--settings--project-custom-fields-mapping-filter-target': 'bulkActionContainer' }) do
              render(Primer::Beta::Button.new(
                tag: :a,
                href: disable_all_project_settings_life_cycle_path(project_id: project),
                scheme: :invisible,
                font_weight: :bold,
                color: :subtle,
                'aria-label': t('projects.settings.actions.label_disable_all'),
                data: { 'turbo-method': :post, 'turbo': true, test_selector: "disable-all-life-cycle-elements" }
              )) do |button|
                button.with_leading_visual_icon(icon: 'x-circle', color: :subtle)
                t('projects.settings.actions.label_disable_all')
              end
            end
          end
        end
      end
      if life_cycle_elements.empty?
        component.with_row do
          render(Primer::Beta::Text.new(color: :subtle)) { t("projects.settings.life_cycle.non_defined") }
        end
      else
        life_cycle_elements.each do |element|
          component.with_row(data: { 'projects--settings--project-custom-fields-mapping-filter-target': 'searchItem' },
                                     test_selector: "project-life-cycle-element-#{element.id}") do
            render(Projects::Settings::LifeCycles::ElementComponent.new(project:, element:))
          end
        end
      end
    end
  end
%>
